<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CAT Analytics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=IBM+Plex+Mono:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../styles.css" />
  </head>
  <body data-mode="cat" data-view="analytics">
    <main class="app-shell">
      <section class="panel stats" id="statsPanel">
        <h3>Live Attempt Metrics</h3>
        <div class="mode-row">
          <label class="switch-toggle">
            <input type="checkbox" id="hideMetricsPanel" />
            <span class="switch-slider" aria-hidden="true"></span>
            <span>Hide Metrics Panel</span>
          </label>
        </div>
        <div id="statsContent">
          <div class="timing-side">
            <div><span>Time Left</span><strong id="timerText">03:00:00</strong></div>
            <div><span>Current Question Time</span><strong id="questionTimerText">0s</strong></div>
            <div><span>Average Question Time</span><strong id="avgQuestionTimeText">0s</strong></div>
          </div>
          <div class="metrics-grid">
            <div><span id="metric1Label">Exam Readiness</span><strong id="thetaText">0.00</strong></div>
            <div><span id="metric2Label">Pass Confidence</span><strong id="seText">--</strong></div>
            <div><span id="metric3Label">Score Confidence Band</span><strong id="ciText">--</strong></div>
            <div><span id="metric4Label">Scaled Score</span><strong id="scaledText">500</strong></div>
            <div><span id="metric5Label">Pass Probability</span><strong id="passProbText">--</strong></div>
            <div><span id="metric6Label">Response Pace</span><strong id="guessSignalText">0%</strong></div>
          </div>
          <div class="graph-wrap">
            <h4>Computerized Adaptive Test Analytics</h4>
            <div class="filter-row">
              <button type="button" id="graphAllBtn" class="filter-btn active">All Dots</button>
              <button type="button" id="graphIncorrectBtn" class="filter-btn">Incorrect Dots Only</button>
              <button type="button" id="graphCorrectBtn" class="filter-btn">Correct Dots Only</button>
            </div>
            <svg id="progressGraph" viewBox="0 0 1000 240" preserveAspectRatio="none" aria-label="Score progress chart"></svg>
            <p class="small-note">Dot markers: green = correct answer, red = incorrect answer, black = non-counted.</p>
          </div>
        </div>
      </section>

      <section class="panel results" id="resultsPanel">
        <h3>Analytics</h3>
        <p id="outcomeBanner" class="outcome"></p>
        <p id="finalSummary"></p>
        <div id="domainBreakdown"></div>
        <div id="domainStrengthChart" class="domain-strength-chart"></div>
        <p id="analyticsNotes" class="small-note"></p>

        <h4>Explanation Review</h4>
        <div class="filter-row">
          <button type="button" id="reviewAllBtn" class="filter-btn active">All Questions</button>
          <button type="button" id="reviewIncorrectBtn" class="filter-btn">Incorrect Only</button>
          <button type="button" id="reviewCorrectBtn" class="filter-btn">Correct Only</button>
        </div>
        <div id="explanationReview" class="explanation-review"></div>

        <div class="actions-row">
          <a class="back-btn" href="../">Back To CAT Setup</a>
        </div>
      </section>

      <section id="setupPanel" class="hidden"></section>
      <section id="questionPanel" class="hidden"></section>
      <section id="domainTargetPanel" class="hidden">
        <div id="domainTargetGrid" class="hidden"></div>
      </section>
      <div id="customQuizControls" class="hidden"></div>
      <input id="minQuestions" class="hidden" />
      <input id="maxQuestions" class="hidden" />
      <input id="fixedQuestionCount" class="hidden" />
      <input id="timedQuiz" type="checkbox" class="hidden" />
      <input id="modeCat" type="radio" checked class="hidden" />
      <input id="modeCustom" type="radio" class="hidden" />
      <button id="startBtn" class="hidden"></button>
      <button id="sessionInfoBtn" class="hidden"></button>
      <button id="submitAnswerBtn" class="hidden"></button>
      <span id="modeSummaryText" class="hidden"></span>
      <span id="domainSelectionSummary" class="hidden"></span>
      <span id="timingScaleNote" class="hidden"></span>
      <span id="catMimicNote" class="hidden"></span>
      <span id="bankStatus" class="hidden"></span>
      <span id="progressText" class="hidden"></span>
      <span id="domainText" class="hidden"></span>
      <span id="difficultyText" class="hidden"></span>
      <span id="scoreText" class="hidden"></span>
      <span id="scoredTrackerText" class="hidden"></span>
      <span id="unscoredRuleText" class="hidden"></span>
      <span id="ciStopText" class="hidden"></span>
      <div id="questionStem" class="hidden"></div>
      <form id="choicesForm" class="hidden"></form>
      <p id="feedbackText" class="hidden"></p>
      <textarea id="reviewText" class="hidden"></textarea>
      <table id="reviewTable" class="hidden"><tbody></tbody></table>
    </main>

    <script type="module" src="../app.js"></script>
  </body>
</html>
