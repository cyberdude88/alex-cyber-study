<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TCSEC ‚Üî EAL Table Builder - Domain 3 - Alex Cyber Study</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    .table-wrap {
      max-width: 1100px;
      margin: 0 auto;
      overflow-x: auto;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 16px;
      padding: 0.75rem;
    }

    .mapping-table {
      width: 100%;
      min-width: 880px;
      border-collapse: collapse;
      color: #fff;
    }

    .mapping-table th,
    .mapping-table td {
      border: 1px solid rgba(255,255,255,0.2);
      padding: 0.75rem;
      text-align: center;
      vertical-align: middle;
    }

    .mapping-table th {
      background: rgba(234,179,8,0.8);
      color: #111827;
      font-weight: 800;
    }

    .mapping-table td:first-child {
      text-align: left;
      color: rgba(255,255,255,0.88);
      font-weight: 600;
    }

    .drop {
      min-height: 44px;
      background: rgba(255,255,255,0.04);
      border-radius: 8px;
      transition: background 0.2s, border-color 0.2s;
    }

    .drop.drag-over {
      background: rgba(234,179,8,0.2);
      box-shadow: inset 0 0 0 2px rgba(234,179,8,0.5);
    }

    .choices-panel {
      max-width: 1100px;
      margin: 1rem auto 0;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 16px;
      padding: 1rem;
    }

    .choices-title {
      text-align: center;
      margin-bottom: 0.8rem;
      color: rgba(255,255,255,0.8);
      font-weight: 700;
    }

    #choices {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      justify-content: center;
    }

    .draggable {
      background: linear-gradient(135deg, #eab308, #ca8a04);
      border: 1px solid rgba(234,179,8,0.6);
      border-radius: 999px;
      padding: 0.45rem 0.85rem;
      color: #111827;
      font-weight: 800;
      cursor: grab;
      user-select: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .draggable.dragging {
      opacity: 0.6;
    }

    .actions {
      margin: 1rem auto 0;
      display: flex;
      justify-content: center;
      gap: 0.8rem;
      flex-wrap: wrap;
    }

    .action-btn {
      border: none;
      border-radius: 999px;
      padding: 0.68rem 1.2rem;
      font-weight: 700;
      color: #fff;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .action-btn:hover {
      transform: translateY(-2px);
    }

    .check-btn {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      box-shadow: 0 4px 14px rgba(34,197,94,0.35);
    }

    .reset-btn-local {
      background: linear-gradient(135deg, #64748b, #475569);
      box-shadow: 0 4px 14px rgba(71,85,105,0.35);
    }

    #resultBox {
      display: none;
      max-width: 1100px;
      margin: 1rem auto 0;
      padding: 0.9rem 1rem;
      border-radius: 12px;
      text-align: center;
      background: rgba(59,130,246,0.18);
      border: 1px solid rgba(59,130,246,0.4);
      color: #dbeafe;
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-inner">
      <a class="logo" href="../index.html"><span class="logo-icon">üõ°Ô∏è</span> Alex Cyber Study</a>
      <ul class="nav-links">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../domain1/index.html">D1</a></li>
        <li><a href="../domain2/index.html">D2</a></li>
        <li><a href="../domain3/index.html" class="active">D3</a></li>
        <li><a href="../domain4/index.html">D4</a></li>
        <li><a href="../domain5/index.html">D5</a></li>
        <li><a href="../domain6/index.html">D6</a></li>
        <li><a href="../domain7/index.html">D7</a></li>
        <li><a href="../domain8/index.html">D8</a></li>
      </ul>
    </div>
  </nav>

  <div class="game-container">
    <div class="game-header">
      <h1>üéØ TCSEC ‚Üî EAL Table Builder</h1>
      <p class="game-subtitle">Domain 3 &mdash; Drag each TCSEC level and EAL mapping into the correct row</p>
    </div>

    <div class="game-controls">
      <a href="index.html" class="back-btn">‚Üê Back to Domain 3</a>
    </div>

    <div class="table-wrap">
      <table class="mapping-table">
        <tr>
          <th>Scenario</th>
          <th>TCSEC Level</th>
          <th>Approx. EAL</th>
        </tr>
        <tr>
          <td>Home PC, no access control</td>
          <td class="drop" data-answer="D"></td>
          <td class="drop" data-answer="EAL0"></td>
        </tr>
        <tr>
          <td>Corporate login system</td>
          <td class="drop" data-answer="C1"></td>
          <td class="drop" data-answer="EAL1"></td>
        </tr>
        <tr>
          <td>Enhanced corporate system with auditing and object reuse protection</td>
          <td class="drop" data-answer="C2"></td>
          <td class="drop" data-answer="EAL2"></td>
        </tr>
        <tr>
          <td>Classified labels (Secret/Confidential)</td>
          <td class="drop" data-answer="B1"></td>
          <td class="drop" data-answer="EAL3"></td>
        </tr>
        <tr>
          <td>Kernel separation + covert channel analysis</td>
          <td class="drop" data-answer="B2"></td>
          <td class="drop" data-answer="EAL4"></td>
        </tr>
        <tr>
          <td>Mathematically verified OS</td>
          <td class="drop" data-answer="A1"></td>
          <td class="drop" data-answer="EAL6"></td>
        </tr>
      </table>
    </div>

    <div class="choices-panel">
      <div class="choices-title">Choices</div>
      <div id="choices">
        <div class="draggable" draggable="true" id="D">D</div>
        <div class="draggable" draggable="true" id="C1">C1</div>
        <div class="draggable" draggable="true" id="C2">C2</div>
        <div class="draggable" draggable="true" id="B1">B1</div>
        <div class="draggable" draggable="true" id="B2">B2</div>
        <div class="draggable" draggable="true" id="A1">A1</div>
        <div class="draggable" draggable="true" id="EAL0">EAL 0 (None)</div>
        <div class="draggable" draggable="true" id="EAL1">EAL 1</div>
        <div class="draggable" draggable="true" id="EAL2">EAL 2</div>
        <div class="draggable" draggable="true" id="EAL3">EAL 3</div>
        <div class="draggable" draggable="true" id="EAL4">EAL 4</div>
        <div class="draggable" draggable="true" id="EAL6">EAL 6-7</div>
      </div>
    </div>

    <div class="actions">
      <button id="checkBtn" class="action-btn check-btn">Check Answers</button>
      <button id="resetBtn" class="action-btn reset-btn-local">Reset</button>
    </div>

    <div id="resultBox"></div>
  </div>

  <footer><p><a href="index.html">‚Üê Back to Domain 3 Games</a></p></footer>

  <script>
    let dragged = null;
    let sourceCell = null;

    function bindDragEvents() {
      document.querySelectorAll(".draggable").forEach((item) => {
        item.addEventListener("dragstart", () => {
          dragged = item;
          sourceCell = item.parentElement.classList.contains("drop") ? item.parentElement : null;
          item.classList.add("dragging");
        });

        item.addEventListener("dragend", () => {
          item.classList.remove("dragging");
          dragged = null;
          sourceCell = null;
        });
      });

      document.getElementById("choices").addEventListener("dragover", (event) => {
        event.preventDefault();
      });

      document.getElementById("choices").addEventListener("drop", (event) => {
        event.preventDefault();
        if (!dragged) return;
        if (sourceCell) {
          delete sourceCell.dataset.filled;
          sourceCell.textContent = "";
          sourceCell.style.background = "rgba(255,255,255,0.04)";
        }
        event.currentTarget.appendChild(dragged);
      });

      document.querySelectorAll(".drop").forEach((cell) => {
        cell.addEventListener("dragover", (event) => {
          event.preventDefault();
          cell.classList.add("drag-over");
        });

        cell.addEventListener("dragleave", () => {
          cell.classList.remove("drag-over");
        });

        cell.addEventListener("drop", (event) => {
          event.preventDefault();
          cell.classList.remove("drag-over");
          if (!dragged) return;
          if (sourceCell && sourceCell !== cell) {
            delete sourceCell.dataset.filled;
            sourceCell.textContent = "";
            sourceCell.style.background = "rgba(255,255,255,0.04)";
          }

          const previous = cell.querySelector(".draggable");
          if (previous) {
            document.getElementById("choices").appendChild(previous);
          }

          cell.textContent = "";
          cell.appendChild(dragged);
          cell.dataset.filled = dragged.id;
        });
      });
    }

    function checkAnswers() {
      const cells = document.querySelectorAll(".drop");
      let score = 0;
      cells.forEach((cell) => {
        const isCorrect = cell.dataset.filled === cell.dataset.answer;
        cell.style.background = isCorrect ? "rgba(34,197,94,0.28)" : "rgba(239,68,68,0.24)";
        if (isCorrect) score += 1;
      });

      const resultBox = document.getElementById("resultBox");
      resultBox.style.display = "block";
      resultBox.innerHTML = `<strong>Score:</strong> ${score}/12<br>${score === 12 ? "Excellent mapping work." : "Keep going. Review TCSEC classes and approximate EAL levels."}`;
    }

    function resetGame() {
      const choices = document.getElementById("choices");
      document.querySelectorAll(".drop").forEach((cell) => {
        const token = cell.querySelector(".draggable");
        if (token) choices.appendChild(token);
        cell.textContent = "";
        cell.style.background = "rgba(255,255,255,0.04)";
        delete cell.dataset.filled;
      });

      const resultBox = document.getElementById("resultBox");
      resultBox.style.display = "none";
      resultBox.innerHTML = "";
    }

    document.getElementById("checkBtn").addEventListener("click", checkAnswers);
    document.getElementById("resetBtn").addEventListener("click", resetGame);
    bindDragEvents();
  </script>
</body>
</html>
